!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.UnbxdSearch=e():t.UnbxdSearch=e()}(window,(function(){return function(t){var e={};function a(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=40)}({15:function(t,e,a){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function a(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);var n={siteKey:"api key",apiKey:"site key",isFlag:!0,searchEndPoint:"https://search.unbxd.io/",productType:"SEARCH",searchQueryParam:"q",browseQueryParam:"p",searchPath:"",productAttributes:["title"],defaultFilters:null,spellCheck:{enabled:!1},pageSize:5,startPageNo:0,facetMultiSelect:!0,updateUrls:!0,variants:void 0,extraParams:{},facetMultilevel:!0,facetDepth:6,showSwatches:!0,allowExternalUrlParams:!1,swatchMap:{},onEvent:function(){},getCategoryId:function(){return encodeURIComponent(window.UnbxdAnalyticsConf.page)||decodeURIComponent(location.pathname.split("category-path")[1].split("/").pop())},setCategoryId:function(t,e){var a,n=t.level,s=(t.parent,t.name),i=(t.action,[]),r=Number(n),c=e.getBreadCrumbsList();c.forEach((function(t,e){t.filterField;var a=t.value;r>e&&i.push(a)})),r>c.length&&i.push(s),a=i.join(">"),window.UnbxdAnalyticsConf&&(window.UnbxdAnalyticsConf.page=a)},applyMultipleFilters:!1,hashMode:!1,pagination:{type:"INFINITE_SCROLL"},onQueryRedirect:function(t,e){if(e){var a=e.value;return"url"===e.type&&(location.href=a),!1}}};function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r={extraParamUrlString:function(){var t=this.options.extraParams,e="";return Object.keys(t).forEach((function(a){e+="&"+a+"="+t[a]})),e},renderFromUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!1,a=this.getQueryParams(t),n=this.options,i=n.pagination,r=n.searchQueryParam,c=n.browseQueryParam,o=r;if("SEARCH"!==n.productType&&(a[o=c]=this.getCategoryId()),"object"===s(a)&&a[o]){var l=a.q,u=a.filter,d=a.sort,p=a.start;e=!0,this.state.userInput!==l&&(this.state.userInput=decodeURIComponent(l));var h=this.getFilterFromParams(u);this.state.rangeFacet=h.rangeFacet,this.state.selectedFacets=h.selectedFilters,this.state.selectedSort=d?decodeURIComponent(d):"",this.state.startPageNo=p||0,this.state.isBack=!1,"FIXED_PAGINATION"!==i.type&&(this.state.startPageNo=0),this.state.pageSize=a.rows?Number(a.rows):this.options.pageSize,this.state.categoryFilter=this.getCategoryFilterFromParams(a),e&&this.getResults()}},getQueryParams:function(t){var e=this.options,a=(e.searchQueryParam,e.hashMode,(this.options.hashMode?location.hash:location.search).substr(1));t&&(a=t);var n=a.split("&"),s=[];n.forEach((function(t,e){t.indexOf("=")>0?s.push(t):s[e-1]=s[e-1]+"&"+t}));for(var i={},r=0;r<s.length;r++){var c=s[r].split("=");void 0===i[c[0]]?i[c[0]]=c[1]:"string"==typeof i[c[0]]?(i[c[0]]=[i[c[0]]],i[c[0]].push(c[1])):i[c[0]].push(c[1])}return i},urlFlattenFacets:function(){var t="",e=this.state.selectedFacets,a=this.options.defaultFilters||{};return Object.keys(e).forEach((function(n,s){var i=e[n];i.length&&(t+="&filter="),i.forEach((function(e,s){var i=e.name,r=e.dataId;void 0!==a[n]&&a[n]===i||(i="".concat("%22").concat(r).concat("%22"),t+=0===s?"".concat(n,":").concat(i):" OR ".concat(n,":").concat(i))}))})),t},getDefaultFiltersStr:function(){var t="",e=this.options.defaultFilters;return null!==e&&Object.keys(e).forEach((function(a){t+="&filter="+a+":"+JSON.stringify(e[a])})),t},getShowVariantsStr:function(){var t=this.options.variants;return t&&"boolean"==typeof t.enabled?"&variants=".concat(t.enabled):""},getVariantAttributesStr:function(){var t=this.options.variants;if(t){var e=t.enabled,a=t.attributes;return a&&e?"&variants.fields=".concat(a.join(",")):""}return""},getVariantsCountStr:function(){var t=this.options.variants;if(t){var e=t.enabled,a=t.count;return a&&e?"&variants.count=".concat(a):""}return""},getVariantsGroupByStr:function(){var t=this.options.variants;if(t){var e=t.enabled,a=t.groupBy;return a&&e?"&variants.groupBy=".concat(a):""}return""},getProductAttributesStr:function(){return this.options.productAttributes?"&fields="+this.options.productAttributes.join(","):""},getPageSizeStr:function(){return"&rows=".concat(this.state.pageSize)},getPageStartStr:function(){return"&start="+this.state.startPageNo},getNewUrlState:function(t){var e=this.options,a=e.productType,n=e.searchQueryParam,s=e.browseQueryParam,i=this.state.userInput,r="",c=n;"BROWSE"===a&&(r="",i=this.getCategoryId(),c=s,this.url=this.getBaseUrl()+"/category?"+c+"=".concat(i)),"CATEGORY"===a&&(r="&pagetype=boolean",i=this.getCategoryId(),c=s,this.url=this.getBaseUrl()+"/category?"+c+"=".concat(i)),"SEARCH"===a&&(t||(i=encodeURIComponent(i)),this.url=this.getBaseUrl()+"/search?"+c+"="+i);var o=this.urlFlattenFacets(),l=this.getShowVariantsStr(),u=this.getVariantAttributesStr(),d=this.getVariantsCountStr(),p=this.getVariantsGroupByStr(),h=this.getProductAttributesStr()+this.getDefaultFiltersStr(),f=this.getSortUrlString(),g=this.getSpellCheckUrlString(),v=this.getRangeFilterStr(),b=this.categoryFilterUrlStr(),y=this.options.facetMultiSelect?"&facet.multiselect=true":"&facet.multiselect=false",m=this.url+b+y+o+l+u+d+p+h+f+g+v+r+this.getPageSizeStr()+this.getPageStartStr()+this.extraParamUrlString()+"&facet.version=V2",S=this.url+b+o+f+v+this.getPageSizeStr()+this.getPageStartStr();return this.state.currentApiUrl=m,this.state.currentWebUrl=S,t?m:S},getRangeFilterStr:function(){var t=this.state.rangeFacet,e=Object.keys(t),a="";return e.forEach((function(e){var n=t[e];Array.isArray(n)?n.length>0&&(a+="&filter=".concat(e,":").concat(n.join(" OR ".concat(e,":")))):a+="&filter=".concat(e,":").concat(n)})),a},categoryFilterUrlStr:function(){var t=this,e=this.state.categoryFilter,a="";return Object.keys(e).forEach((function(n,s){var i=t.getAFacetByName(n)[0],r=t.getBreadCrumbsList(n),c=null;if(i){var o=i.filterField,l=i.values,u=e[n].map((function(e,a){if(c=l.find((function(a){return t.cleanFacetValue(encodeURIComponent(a.name))===t.cleanFacetValue(e)})),r){var n=r.find((function(t){return t.value===e}));n&&(c={name:n.value})}return c&&t.encodeCategoryFacetValue(c.name).split("%22").join(""),a>0?">".concat(t.encodeCategoryFacetValue(e).split("%22").join("")):t.encodeCategoryFacetValue(e).split("%22").join("")}));a+="categoryPath"===o?"&category-filter=".concat(u.join("")):"&filter=".concat(o,':"').concat(u.join(""),'"')}else if(e&&e.categoryPath){var d="";e.categoryPath.forEach((function(e,a){e.split(">").forEach((function(e,a){var n=t.encodeCategoryFacetValue(e).split("%22").join("");""!==d?d+=">".concat(n):d=n}))})),a+="&category-filter=".concat(d)}})),a},getSortUrlString:function(){var t=this.getSelectedSort();return t?"&sort="+encodeURI(t):""},getSpellCheckUrlString:function(){return this.options.spellCheck.enabled?"&spellcheck="+!0:""},getBaseUrl:function(){var t=this.options,e=t.searchEndPoint,a=t.siteKey;return e+t.apiKey+"/"+a},getStateFromUrl:function(){var t=this.getQueryParams(),e={},a=this.options.pagesize.pageSize;if("object"===i(t)){var n=t.q,s=t.filter,r=t.sort,c=t.start,o=t.rows,l=void 0===o?a:o;this.state.userInput!==n&&(e.userInput=n);var u=this.getFilterFromParams(s);e.rangeFacet=u.rangeFacet,e.selectedFacets=u.selectedFilters,e.selectedSort=r||"",e.startPageNo=c||0,e.pageSize=Number(l),e.categoryFilter=this.getCategoryFilterFromParams(t)}return e}},c=function(t){this.state.startPageNo=t},o=function(){var t=this.getSearchResults();if(!t)return null;var e=t.numberOfProducts,a=t.start,n=t.products,s=this.state.pageSize,i=0;e>0&&(i=e%s==0?e/s:Math.floor(e/s)+1);var r=Math.floor(a/s)+1,c=!(a+s>=e||a>=e),o=!(a-s<0||a<=0);return{numberOfProducts:e,start:a,productsLn:n.length,rows:s,noOfPages:i,currentPage:r||0,isNext:c,isPrev:o}},l=function(t){"number"==typeof t&&t===parseInt(t)&&(this.state.pageSize=t,this.state.startPageNo=0)},u=function(t){Array.isArray(t)?this.options.productAttributes=t:this.options.productAttributes="*"},d=function(t){var e=this.options.variants,a=void 0===e?{}:e;"boolean"==typeof t&&(a.enabled=t),this.options.variants=a},p=function(t){var e=this.options.variants,a=void 0===e?{}:e;"number"==typeof t&&(a.count=t),this.options.variants=a},h=function(t){var e=this.options.variants,a=void 0===e?{}:e;Array.isArray(t)&&(a.attributes=t),this.options.variants=a},f=function(t){var e=this.options.variants,a=void 0===e?{}:e;"string"==typeof t&&t.length>0&&(a.groupBy=t),this.options.variants=a},g=function(){return this.state.responseObj&&this.state.responseObj.searchMetaData||null},v=function(){var t=this.getResponseObj();return t&&t.response||null},b=function(){var t=this.getSearchMeta();return t&&t.queryParams||null},y=function(){if(this.state.responseObj){var t=this.state.responseObj.searchMetaData.queryParams;return t.q||t.p}return""},m={changeInput:"CHANGE_INPUT",fetchError:"FETCH_ERROR",afterApiCall:"AFTER_API_CALL",beforeApiCall:"BEFORE_API_CALL"};function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function F(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(Object(a),!0).forEach((function(e){C(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function C(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var w=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=this.state,n=a.userInput,s=a.isHistory,i=a.isBack,r=""===e?encodeURIComponent(n):e;if(this.state.userInput=r,this.state.currentApiUrl=this.getNewUrlState(!0),this.state.isLoading)return!1;this.state.isLoading=!0;var c=this,o=this.options,l=o.productType,u=o.hashMode,d=o.updateUrls,p=o.variants;if(!u&&d&&!s&&!i){this.state.isBack=!1;var h=this.state.currentWebUrl.split("".concat(l.toLocaleLowerCase(),"?"))[1];if(decodeURIComponent(location.search)!=="?".concat(decodeURIComponent(h)))return this.setUrl(!0),!1}this.options.spellCheck,this.callBack(this,m.beforeApiCall);var f=fetch(this.state.currentApiUrl),g=function(e){t.state.isLoading=!1,t.state.userInput=decodeURIComponent(r),e&&t.callBack(c,e)};f.then((function(e){return t.state.requestId=e&&e.headers?e.headers.get("X-Request-Id"):"",e.json()})).then((function(e){if(t.state.isLoading=!1,t.state.userInput=decodeURIComponent(r),e&&!e.error){p&&p.enabled&&(e=t.processVariantMap(e)),t.state.responseObj=e;var a=t.getDidYouMeanFromResponse();a&&(t.state.didYouMean=a,t.state.noResultQuery=t.state.userInput);var n=e,o=n.facets,l=n.response;if(o){var u=t.getFacets(),h=t.modifyFacetsList(u);e.facets=F({},o,{text:{list:h}})}if(l){var f=l.products,v=t.options.pagination;v&&"FIXED_SCROLL"!==v.type?t.state.products=t.state.products.concat(f):t.state.products=f}t.state.responseObj=e,t.setSort(),d&&s&&!i&&(t.state.isBack=!1,t.setUrl(!1),t.updateSelectedFacetsCount()),t.callBack(c,m.afterApiCall)}else g(m.fetchError)})).catch((function(t){g(m.fetchError)}))},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.options.variants.mapping,a=void 0===e?{}:e,n=Object.keys(a);if(t.response&&t.response.products){var s=t.response.products.map((function(t){var e=t,s=e.variants,i=void 0===s?[]:s,r=e.relevantDocument,c=t;"variant"===r&&i.length>0&&(t=i[0],n.forEach((function(e){var n=a[e];c[e]=t[n]})));var o=[];return i.forEach((function(t,e){var s=t;n.forEach((function(e){var n=a[e];n&&(s[e]=t[n])})),o.push(s)})),c.variants=o,c}));t.response.products=s}return t},U=function(t,e){return this.state.products.find((function(a){return a[t]===e}))},P=function(){var t=this,e=this.getSearchQueryParams(),a=e.q,n=e.filter;this.state.userInput=a;var s=[];if(n){if(Array.isArray(n))n.forEach((function(t,e){var a=t.replaceAll(":","__");a=encodeURIComponent(a).replaceAll("__",":"),s.push(a)}));else{var i=n.replaceAll(":","__");i=encodeURIComponent(i).replaceAll("__",":"),s=[i]}e.filter=s}var r=this.getFilterFromParams(s);this.state.rangeFacet=r.rangeFacet;var c=r.selectedFilters,o=null;c?Object.keys(c).forEach((function(e){if(t.isCategoryFacet(e)){o=e;var a=c[e][0].dataId;t.state.categoryFilter[o]=a.split(">"),t.state.selectedFacets[o]&&delete t.state.selectedFacets[o]}else t.state.selectedFacets[e]=c[e]})):this.state.selectedFacets={},0===Object.keys(this.state.categoryFilter).length&&(this.state.categoryFilter=this.getCategoryFilterFromParams(e)),this.state.breadcrumbs=this.getBreadCrumbs(o)},A=function(t){var e=t.siteName,a=t.siteKey,n=t.searchEndPoint,s=t.searchQueryParam,i=t.browseQueryParam,r=t.defaultFilters,c=t.spellCheck,o=t.pageSize,l=t.startPageNo,u=t.facetDepth,d=t.facetMultilevel,p=t.facetMultiSelect,h=t.updateUrls,f=t.extraParams,g=t.onEvent,v=t.getCategoryId,b=t.applyMultipleFilters,y=t.hashMode;this.state.pageSize=o||this.state.pageSize,this.state.startPageNo=l||this.state.startPageNo,this.options.siteName=e||this.options.siteName,this.options.siteKey=a||this.options.siteKey,this.options.searchEndPoint=n||this.options.searchEndPoint,this.options.searchQueryParam=s||this.options.searchQueryParam,this.options.browseQueryParam=i||this.options.browseQueryParam,this.options.defaultFilters=r||this.options.defaultFilters,this.options.spellCheck=c||this.options.spellCheck,this.options.pageSize=o||this.options.pageSize,this.options.startPageNo=l||this.options.startPageNo,this.options.applyMultipleFilters=b||this.options.applyMultipleFilters,this.options.facetDepth=u||this.options.facetDepth,this.options.facetMultilevel=d||this.options.facetMultilevel,this.options.facetMultiSelect=p||this.options.facetMultiSelect,this.options.updateUrls=h||this.options.updateUrls,this.options.extraParams=f||this.options.extraParams,this.options.onEvent=g||this.options.onEvent,this.options.getCategoryId=v||this.options.getCategoryId,this.options.hashMode=y||this.options.hashMode},O=function(t){var e=this.state,a=e.urlState,n=e.isHistory;this.options.hashMode?decodeURIComponent(location.hash)!=="#".concat(decodeURIComponent(a))?((history.state||{}).path,this.state.isBack=!0,this.renderFromUrl(t.state)):this.callBack(this,"lastBack"):n?((history.state||{}).path,this.state.isBack=!0,this.renderFromUrl(t.state)):this.callBack(this,"lastBack")},E=function(){return this.state.requestId},I=function(t,e){var a={};return Object.keys(e).forEach((function(n){var s=e[n];a[n]=t[s]})),a},R=function(){var t=this.getResponseObj();if(t&&t.facets&&t.facets.multilevel){var e=t.facets.multilevel.bucket||t.facets.multilevel.list||[];return this.modifyFacetsList(e)}return[]},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this,a={},n={};return"string"==typeof t&&(t=Array(t)),t.forEach((function(t,s){t.split("%20OR%20").forEach((function(t,s){var i=t.split(/%3A(.+)/);if(3===i.length){var r=decodeURIComponent(i[1]);if(r=r.replace(/(^")|("$)/g,"").replace(/\"{2,}/g,'"').replace(/\\\"/g,'"').replace(/(^\[)|(\]$)/g,""),i[1].indexOf("TO")>0){var c=r.split(" TO "),o=i[0],l="[".concat(Number(c[0])," TO ").concat(Number(c[1]),"]");n[o]?n[o].push(l):n[o]=[l]}else{var u=i[0],d=i[1],p=e.cleanEncodedFacetValue(d),h=e.decodeFacetValue(p),f=e.getFacetByValue(u,h);if(f.actualFound){var g=f.facetName,v=f.selectedvalue;a[g]?a[g].push(v):a[g]=Array(v)}else{var b=f.facetName,y={name:f.selectedvalue.name,dataId:p,count:0};a[b]?a[b].push(y):a[b]=Array(y)}}}}))})),{selectedFilters:a,rangeFacet:n}},k=function(t){var e=this,a=t.filter,n=[];if(t["category-filter"]&&(n=(a=t["category-filter"]).split(">")),!a)return{};Array.isArray(a)||(a=[a]),a=this.getFilterFromParams(a).selectedFilters;var s={};if(Object.keys(a).forEach((function(t){if(e.isCategoryFacet(t)){var n=a[t][0].dataId;s[t]=n.split(">")}})),n.length>0&&n){var i=[];n.forEach((function(t){decodeURIComponent(t).split(">").forEach((function(t){i.push(decodeURIComponent(t))}))})),s.categoryPath=i}return s},j=function(){var t=this.getResponseObj();if(t){var e=t.facets;return e&&e.range&&e.range.list?e.range.list:[]}return[]},L=function(){var t=this.getResponseObj();if(t){var e=t.facets;return e&&e.text&&e.text.list?e.text.list:[]}return[]},x=function(){return this.state.selectedFacets},X=function(t){return this.getFacets().find((function(e){return e.facetName===t?e:null}))},M=function(t){var e=this.state.selectedFacets,a=t.selectedFacetName,n="",s="",i=0,r=this.getSelectedFacetValue(t);if(r&&(n=r.name,s=r.dataId,i=r.count),this.isFacetAlreadyAdded(a,s))return!1;e[a]?e[a].push({name:n,dataId:s,count:i}):e[a]=[{name:n,dataId:s,count:i}],this.callBack(self,"added_facet"),this.options.applyMultipleFilters||(this.setPageStart(0),this.getResults.bind(this)())},_=function(t){var e=this.state.selectedFacets;this.clearFacets(!1),Object.keys(t).map((function(a){e[a]?delete e[a]:e[a]=t[a]})),this.setPageStart(0),this.getResults.bind(this)()},B=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.state.selectedFacets;Object.keys(e).map((function(t){return delete e[t]})),t&&(this.setPageStart(0),this.getResults.bind(this)())};function V(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return D(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?D(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var z=function(t){var e=this.state.selectedFacets;Object.keys(t).map((function(a){var n=e[a]||[];e[a]=[].concat(V(n),V(t[a]))}))},W=function(t){return this.state.selectedFacets[t]},H=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.parent,n=void 0===a?null:a,s=e.level,i=void 0===s?null:s;if(e.name,i)if(this.state.categoryFilter[n])0==(i=Number(i)-1)?delete this.state.categoryFilter[n]:this.state.categoryFilter[n].splice(i,6);else{var r=this.getBreadCrumbsList(n);i>1&&(this.state.categoryFilter[n]=[],r.forEach((function(e,a){if(a<i-1){var s=e.value;t.state.categoryFilter[n].push(s)}})))}},Q=function(t,e){var a=this.getSelectedFacets();if(e){var n=a[t];this.state.selectedFacets[t]=n.filter((function(t){return t.dataId!=e}))}else delete this.state.selectedFacets[t];return this.state.selectedFacets};function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function q(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var G=function(t,e){var a=this.getSelectedFacet(t)||{facetName:t},n=!1,s=a.values,i=void 0===s?[]:s,r={name:e};if(i.length>0)for(var c=0;c<i.length;c++){var o=i[c];if(o.name===e){n=!0,r=o;break}}return n?function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(a),!0).forEach((function(e){q(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},a,{selectedvalue:r,actualFound:n}):{facetName:t,actualFound:n,selectedvalue:{name:e,dataId:e,count:0}}},K=function(t){var e=t.selectedFacetId;return t.facetData.values.find((function(t){return t.dataId===e}))},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.parent,a=void 0===e?null:e,n=t.level,s=void 0===n?null:n,i=t.name,r=void 0===i?null:i,c=this.getCategoryFacetByValue(r),o=this.getBreadCrumbsList(a);if((s=Number(s))&&c)if(this.state.categoryFilter[a]&&s<=o.length)this.state.categoryFilter[a][s-1]=c,this.callBack(this,"deletedcategoryFilter");else{var l=[];(l=o.map((function(t){return t.value}))).push(c),this.state.categoryFilter[a]=l,this.callBack(this,"setCategoryFilter")}},J=function(t){if(t.length){var e=this.options.extraParams["facet.multilevel"];this.state.categoryFilter[e]=[t]}},Z=function(t){var e=t.start,a=t.end,n=t.facetName,s=t.applyMultiple,i="[".concat(e," TO ").concat(a,"]");if(s)if(this.state.rangeFacet[n]){var r=this.state.rangeFacet[n].indexOf(i);r<0?this.state.rangeFacet[n].push(i):this.state.rangeFacet[n].splice(r,1)}else this.state.rangeFacet[n]=[i];else this.state.rangeFacet[n]=[i];this.callBack(self,"added_facet")},tt=function(t){var e=this.state.rangeFacet;e[t]&&delete e[t],this.state.rangeFacet=e},et=function(t,e){this.deleteFacet(t,e),this.callBack(this,"deleted_facet"),this.options.applyMultipleFilters||(this.setPageStart(0),this.getResults.bind(this)())},at=function(t,e){var a=this.getSelectedFacets()[t],n=!1;return a&&a.forEach((function(t){if(t.dataId===e)return n=!0,!1})),n},nt=function(t){var e=this.state.rangeFacet;return t?e[t]:e};function st(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function it(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var rt=function(t){var e=[];return(t||[]).forEach((function(t){for(var a=t.values,n=a.counts,s=a.gap,i=[],r=[],c=0;c<n.length;c+=2){var o=Number(n[c]),l={name:o,count:n[c+1],dataId:o};if(r.push(l),r.length>=2){var u=r[0],d=r[1];i.push({from:u,end:d}),r.shift()}}if(1===r.length){var p=r[0],h=p.dataId+s,f={name:h,count:0,dataId:h};i.push({from:p,end:f})}var g=i[0].from.dataId,v=i[i.length-1].end.dataId;t.start=g,t.end=v,t.max=v,t.gap=s||1,t.min=g,t.values=i,e.push(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?st(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},t,{values:i}))})),e},ct=function(){var t=this.getRangeFacets();return rt(t)},ot=function(t){var e=this.getAFacetByName(t)[0];return!!e&&"category"===e.facetType};function lt(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ut(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ut(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var dt=function(){var t=this.getAllTextFacets(),e=this.getAllRangeFacets(),a=this.getAllCategory();return[].concat(lt(a),lt(t),lt(e)).sort(this.sortFacets)},pt=function(t){var e=this.getAllFacets(),a=[];return t&&(a=e.filter((function(e){return e.facetName===t}))),a},ht=function(){var t=this.state.categoryFilter;return t?Object.keys(t):null},ft=function(){var t=this.getSelectedBucketedFacet(),e=this.getSelectedRanges(),a=this.getSelectedFacets();return Object.assign({},t,e,a)},gt=function(){var t=this.getAllSelectedFacets()||{};return Object.keys(t).length},vt=function(){var t=this.getAllSelectedFacets()||{},e=Object.keys(t),a=0;return e.forEach((function(e){var n=t[e];Array.isArray(n)&&(a+=n.length)})),a},bt=function(t){var e=this.getBucketedFacets(),a=null;if(e)for(var n=0;n<e.length;n++)for(var s=e[n].values,i=0;i<s.length;i++){var r=s[i],c=r.dataId,o=r.name;if(c===t){a=o;break}}return a};function yt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function mt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(a),!0).forEach((function(e){St(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function St(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Ft=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=[];return e.forEach((function(n,s){var i=n;if(n.name)a.push(mt({},i,{dataId:t.encodeFacetValue(n.name)}));else{var r="";s%2==1&&(r=e[s-1],a.push({name:r,count:i,dataId:t.encodeFacetValue(r)}))}})),a},Ct=function(t){var e=this,a=[];return(t||[]).forEach((function(t,n){var s=t.values,i=t.displayName,r=t.facetName,c=t.filterField;r||(i&&(t.facetName=i),c&&(t.facetName=c)),t.values=e.modifyValues(s),a.push(t)})),a};function wt(t){var e="0"+t.charCodeAt(0).toString(16);return"\\x"+e.substr(e.length-2)}var Nt=function(t){return t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/[\x00-\x1F\x80-\x9F]/g,wt),encodeURIComponent(t)},Ut=function(t){return t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/[\x00-\x1F\x80-\x9F]/g,wt),encodeURIComponent(t)},Pt=function(t){return decodeURIComponent(new String("".concat(t)))},At=function(t){return t.replace(/[^\w\d]/g,"")},Ot=function(t){var e=t.split("%22");return 1===e.length?e[1]:(e=e.slice(1,-1)).join("%22")},Et=function(){return this.state.categoryFilter},It=function(){this.setPageStart(0),this.getResults.bind(this)()},Rt=function(t,e){return t.position>e.position?1:-1},Tt=function(){return this.getFacets().map((function(t){return t.facetType="text",t}))},kt=function(){return this.getRanges().map((function(t){return t.facetType="range",t}))},jt=function(){return this.getBucketedFacets().map((function(t){return t.facetType="category",t}))},Lt=function(t){var e=this.getBreadCrumbs(t),a=[],n=e;if(e)for(var s=0;s<this.options.facetDepth&&(n.level&&function(){var t=n,e=t.level,s=t.values,i=t.filterField;s.forEach((function(t){a.push({level:e,filterField:i,value:t.value||t.name})}))}(),n.child);s++)n=n.child;return a},xt=function(t){var e=this.getResponseObj(),a=[];if(e&&e.facets&&e.facets.multilevel&&t){var n=e.facets.multilevel.list;if(n)n.forEach((function(e){var n=e.filterField,s=e.breadcrumb;n===t&&(a=s)}));else{var s=e.facets.multilevel.breadcrumb;a=s||null}}return a},Xt=function(t){this.setSort(t),this.setPageStart(0),this.getResults.bind(this)()},Mt=function(t){if(void 0!==t)this.state.selectedSort=t;else{var e=this.getSearchQueryParams();this.state.selectedSort=e.sort?e.sort:""}},_t=function(){return this.state.selectedSort},Bt=function(){var t=this.getResponseObj()||{};return t&&t.didYouMean?t.didYouMean:[]},Vt=function(){return(this.state.didYouMean||[]).map((function(t){return t.suggestion}))},Dt=function(t){this.options.spellCheck.enabled=!!t},zt=function(){var t=this.getResponseObj()||{};return t&&t.banner&&t.banner.banners&&t.banner.banners||[]},Wt=function(t,e){this.state.userInput=t,this.callBack(t,e)},Ht=function(){this.state.selectedFacets={},this.state.rangeFacet={},this.state.categoryFilter={},this.state.breadcrumbs={}},Qt=function(){this.resetFacets(),this.state.didYouMean=null,this.state.startPageNo=0,this.state.selectedSort="",this.state.responseObj=null,this.state.userInput="",this.state.pageSize=this.options.pageSize},Yt=function(t){var e=t.prototype;e.changeInput=Wt,e.resetFacets=Ht,e.resetAll=Qt,function(t){t=Object.assign(t,r)}(e),function(t){Object.assign(t,{setPageStart:c,getPaginationInfo:o,setPageSize:l})}(e),function(t){t=Object.assign(t,{setProductAttributes:u,setShowVariants:d,setVariantsCount:p,setVariantAttributes:h,setVariantsGroupBy:f,getSearchResults:v,getSearchMeta:g,getSearchQueryParams:b,getSearchQuery:y,getResults:w,processVariantMap:N,getProductByPropValue:U,setStateFromData:P,setSearchConfigurations:A,onLocationChange:O,getRequestId:E})}(e),function(t){Object.assign(t,{getSwatches:I})}(e),function(t){t=Object.assign(t,{getBucketedFacets:R,getSelectedBucketedFacet:Et,getFilterFromParams:T,getCategoryFilterFromParams:k,getRangeFacets:j,getFacets:L,getSelectedFacets:x,getSelectedFacet:X,updateFacets:M,applyFacets:_,clearFacets:B,addFacets:z,findSelectedFacet:W,deleteCategoryFilter:H,deleteFacet:Q,getFacetByValue:G,getSelectedFacetValue:K,setCategoryFilter:$,setDefaultCategoryFilter:J,setRangeFacet:Z,clearARangeFacet:tt,deleteAFacet:et,applyRangeFacet:It,isFacetAlreadyAdded:at,getSelectedRanges:nt,getRanges:ct,sortFacets:Rt,isCategoryFacet:ot,getAllFacets:dt,getAFacetByName:pt,getSelectedMultilevelFacet:ht,getAllTextFacets:Tt,getAllRangeFacets:kt,getAllCategory:jt,getAllSelectedFacets:ft,getSelectedFacetsCount:gt,getSelectedFacetValueCount:vt,encodeFacetValue:Nt,modifyFacetsList:Ct,modifyValues:Ft,decodeFacetValue:Pt,cleanFacetValue:At,getCategoryFacetByValue:bt,encodeCategoryFacetValue:Ut,cleanEncodedFacetValue:Ot})}(e),function(t){t=Object.assign(t,{getBreadCrumbsList:Lt,getBreadCrumbs:xt})}(e),function(t){t=Object.assign(t,{applySort:Xt,getSelectedSort:_t,setSort:Mt})}(e),function(t){t=Object.assign(t,{getDidYouMeanFromResponse:Bt,getSpellCheckSuggested:Vt,setSpellCheck:Dt})}(e),function(t){t=Object.assign(t,{getBanners:zt})}(e)};function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Gt=function t(e){if(!e)return e;var a,n=Array.isArray(e)?[]:{};for(var s in e)a=e[s],n[s]="object"===qt(a)?t(a):a;return n};function Kt(t){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,s=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(n=(r=c.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0);}catch(t){s=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(s)throw i}}return a}}(t,e)||Zt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Zt(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,i=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){r=!0,s=t},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw s}}}}function Zt(t,e){if(t){if("string"==typeof t)return te(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?te(t,e):void 0}}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function ee(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ae=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Object.assign({},n,e),this.state={userInput:"",responseObj:null,selectedFacets:{},currentWebUrl:"",currentApiUrl:"",didYouMean:null,startPageNo:this.options.startPageNo||0,isLoading:!1,selectedSort:"",isUrlUpdated:!1,rangeSliderList:[],rangeFacet:{},categoryFilter:{},breadcrumbs:{},urlState:"",noResultQuery:"",pageSize:this.options.pageSize||12,urlLoad:!1,isHistory:window.history,isBack:!1,products:[],requestId:null};var a=this.options,s=a.searchQueryParam,i=a.browseQueryParam,r=a.productType,c=a.getCategoryId,o=a.setCategoryId,l="/search?",u=s;"CATEGORY"===r&&(l="/category?",u=i),this.getCategoryId=c,this.setCategoryId=o,this.url=this.getBaseUrl()+l+u+"="}var e,a,s;return e=t,(a=[{key:"getResponseObj",value:function(){var t=this.state.responseObj;return t?Gt(t):null}},{key:"getUrlParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,a=Object.keys(e);return a.forEach((function(n,s){var i=e[n];i.forEach((function(e,a){t="".concat(t).concat(n,"=").concat(encodeURIComponent(e)),a!==i.length-1&&(t="".concat(t,"&"))})),s!==a.length-1&&(t="".concat(t,"&"))})),t}},{key:"getUrlStr",value:function(t){var e=["filter","category-filter","rows","start","sort",this.options.browseQueryParam,this.options.searchQueryParam],a=new URLSearchParams(location.search),n=new URLSearchParams(t),s={};if(this.options.allowExternalUrlParams){var i,r=Jt(a);try{for(r.s();!(i=r.n()).done;){var c=$t(i.value,2),o=c[0];c[1],e.indexOf(o)<0&&(s[o]=a.getAll(o))}}catch(t){r.e(t)}finally{r.f()}}var l,u=Jt(n);try{for(u.s();!(l=u.n()).done;){var d=$t(l.value,2),p=d[0];d[1],s[p]=n.getAll(p)}}catch(t){u.e(t)}finally{u.f()}return this.getUrlParamString("?",s)}},{key:"setUrl",value:function(t){var e=this.options,a=e.productType,n=e.hashMode,s=e.searchPath,i=e.onQueryRedirect,r=(e.allowExternalUrlParams,this.state),c=r.urlLoad,o=r.isHistory,l=r.responseObj,u=(void 0===l?{}:l).redirect;"function"==typeof i&&i(this,u);var d=this.getNewUrlState(!1).split("".concat(a.toLocaleLowerCase(),"?"))[1];this.state.urlState=d;var p=location.pathname.includes(s);if(n){var h="#".concat(d);if(p&&h!==location.hash){var f=this.getUrlStr(d);"?"===f.charAt(0)&&(f=f.substring(1)),location.hash=f}}else{if(o&&!c&&p){var g="?".concat(d);decodeURI(g)!==decodeURI(location.search)&&(g=this.getUrlStr(g),window.history.pushState(d,null,g),this.state.urlLoad=!1)}if(t&&p){var v=this.getUrlStr(v);location.search=v}}}},{key:"updateSelectedFacetsCount",value:function(){var t=this.getQueryParams(),e=this.options,a=e.searchQueryParam,n=e.browseQueryParam,s=a;if("SEARCH"!==e.productType&&(t[s=n]=this.getCategoryId()),"object"===Kt(t)&&t[s]){var i=t.filter,r=this.getFilterFromParams(i);this.state.selectedFacets=r.selectedFilters}}},{key:"callBack",value:function(t,e){(0,this.options.onEvent)(this,e)}}])&&ee(e.prototype,a),s&&ee(e,s),t}();Yt(ae);var ne=ae;e.default=ne}]).default},17:function(t,e,a){},40:function(t,e,a){"use strict";a.r(e);var n=a(15),s=a.n(n);a(17);var i=function(t,e,a,n){t.addEventListener(e,(function(t){for(var e=t.target;e&&e!==this;)e.matches(a)&&n.call(e,t),e=e.parentNode}))};function r(t,e,a,n){var s=t.facetName,i=t.facetType,r=e.name,c=e.count,o=e.dataId,l=this.options.facet,u=l.facetClass,d=l.selectedFacetClass,p=l.removeFacetsSelectorClass,h=this.testIds.UNX_uFilter,f="deleteSelectedFacetValue";"range"===i&&(f="deleteSelectedRange");var g=" ".concat(u," ").concat(d," ");return['<div class="UNX-selected-facets-wrap">','<button data-test-id="'.concat(h,'" class="UNX-selected-facet-btn UNX-change-facet ').concat(g,'" data-facet-name="').concat(s,'" data-facet-action="').concat(f,'" data-id="').concat(o,'">'),'<span class="UNX-facet-text">'.concat(r,'</span> <span class="UNX-facet-count">(').concat(c,")</span>"),"</button>",'<button class="UNX-delete-facet '.concat(p," ").concat(g,'" data-id="').concat(o,'" data-facet-action="').concat(f,'" data-facet-name="').concat(s,'">x</button></div>')].join("")}function c(t,e,a){var n=e.clearAllText,s=e.clearFacetsSelectorClass,i=this.selectedFacetClass?this.selectedFacetClass:a.selectedFacetClass;return t.length>0?['<div class="UNX-facets-selections">','<h5 class="UNX-selected-facet-header">Selected Filters</h5>','<div class="UNX-selected-facets-inner">'.concat(t,"</div>"),'<button class="'.concat(s," ").concat(i,'" data-facet-action="clearAllFacets">').concat(n,"</button>"),"</div>"].join(""):""}var o=function(t,e){if(!t)return"";var a=t.currentPage,n=t.isNext,s=t.isPrev,i=t.noOfPages,r=t.productsLn,c=t.numberOfProducts,o=t.rows,l=e.pageClass,u=e.selectedPageClass,d=e.pageLimit,p=this.testIds.UNX_pageNumber;if(c<=r)return"";var h='<button class="UNX-next-btn UNX-page-next '.concat(l,'" data-page-action="next">></button>'),f='<button class="UNX-prev-btn UNX-page-prev '.concat(l,'" data-page-action="prev"><</button>'),g="",v=i<d?i:d,b=1,y=Math.ceil(d/2),m=a-y;m>0&&(b=m,v=a+y);var S=a+y;S>=i&&((b-=S-i)<=0&&(b=1),v=i);for(var F=b;F<=v;F++){var C="".concat(p).concat(F),w=F===a?u:"";g+='<button data-test-id="'.concat(C,'" data-page-action="paginate" data-page-no="').concat((F-1)*o,'" class="UNX-page-button ').concat(l," ").concat(w,'">').concat(F,"</button>")}return n||(h='<button disabled class="UNX-next-btn UNX-page-next">></button>'),s||(f='<button disabled class="UNX-prev-btn UNX-page-prev"><</button>'),['<div class="UNX-pagination-block">',f,'<div class="UNX-page-no-block">'.concat(g,"</div>"),h,"</div>"].join("")},l=function(t,e){var a=e.pageClass;return'<div class="UNX-click-scroll"><button data-test-id="'.concat(this.testIds.UNX_loadMore,'" class="UNX-click-n-scroll ').concat(a,'">Load More</button></div>')},u=function(t,e,a,n){var s="",i=n.multiLevelFacetSelectorClass,r=n.facetClass,c=this.testIds.UNX_facetLevel;e&&e.forEach((function(t){var e=t.level,a=t.filterField,n=t.value,o='data-test-id="'.concat(c).concat(e,'"'),l="".concat(i,"  UNX-category-level-").concat(e);s+=["<button ".concat(o,' data-parent="').concat(a,'" data-level="').concat(e,'" data-name="').concat(n,'"'),'class=" '.concat(l," UNX-selected-crumb ").concat(r,'" data-action = "clearCategoryFilter">'),'<span class="UNX-category-icon"></span><label class="UNX-facet-text">'.concat(decodeURIComponent(n),"</label>"),"</button>"].join("")}));var o=t.level,l=(t.displayName,t.values),u=t.filterField,d=t.multiLevelField;d||(d=u);var p='data-test-id="'.concat(c).concat(o,'"'),h="UNX-category-level-".concat(o),f=l.map((function(t){var e=t.name,n=t.count,s=t.dataId;return a&&a.length>0&&e.toUpperCase().indexOf(a.toUpperCase())<0&&(r+=" UNX-search-hidden"),["<button ".concat(p,' data-parent="').concat(d,'" data-level="').concat(o,'"'),'class="'.concat(i," ").concat(h," ").concat(r,'" data-name="').concat(s,'" data-action = "setCategoryFilter">'),'<label class="UNX-facet-text">'.concat(e,'</label><label class="UNX-facet-count">(').concat(n,")</label></button>")].join("")}));return""!==(s+='<div class="UNX-category-values">'.concat(f.join(""),"</div>"))?['<div class="UNX-multi-facet-wrap">',"".concat(s,"</div>")].join(""):""},d=function(t,e){var a="",n=e.selectorClass;return t.forEach((function(t,e){var s=t.level,i=t.filterField,r=t.value,c="".concat(n," UNX-bread-crumb-item");e>0&&(a+='<span class="UNX-slash"> / </span>'),a+=['<button data-parent="'.concat(i,'" data-level="').concat(s,'" class="').concat(c,'" data-name="').concat(r,'" data-action = "clearCategoryFilter">'),"".concat(decodeURIComponent(r),"</button>")].join("")})),'<div class="bread-crumb-main">'.concat(a,"</div>")},p=function(t,e){var a=this.testIds.UNX_pagesize,n='<label class="UNX-hidden" for="unxPageSize">Sort By</label><select id="unxPageSize" name="unxPageSize" class="UNX-select-pagesize '.concat(e.pageSizeClass,'">');return e.options.forEach((function(s,i){var r='data-test-id="'.concat(a).concat(i+1,'"');n+=t==s?"<option selected ".concat(r,' class="').concat(e.selectedPageSizeClass,'" id="').concat(s,'">').concat(s,"</option>"):"<option ".concat(r,' id="').concat(s,'">').concat(s,"</option>")})),'<div class="UNX-pagesize-block">'.concat(n+="</select>","</div>")},h={productId:"uniqueId",searchBoxEl:null,siteKey:"demo-spanish-unbxd809051588861207",apiKey:"f19768e22b49909798bc2411fa3dd963",searchPath:"",searchEndPoint:"https://search.unbxd.io/",products:{el:null,template:function(t,e,a,n,s){var i=t.unxTitle,r=t.unxImageUrl,c=t.uniqueId,o=t.unxStrikePrice,l=t.unxPrice,u=t.unxDescription,d=s.productItemClass,p=s.defaultImage,h=Array.isArray(r)?r[0]:r;h||(h=p);var f='<div class="UNX-img-wrapper"><img class="UNX-img-block" alt="'.concat(i,'" src="').concat(h,'"/></div>'),g='<span class="UNX-sale-price">'.concat(l,"</span>"),v="";o&&(v='<span class="UNX-strike-price">'.concat(o,"<span>"));var b="",y="";"GRID"===n?b="UNX-grid-card":(b="UNX-list-card",y='<p class="UNX-description">'.concat(u,"</p>"));var m="",S=a||{},F=S.btnList,C=S.imgList;return F&&(m='<div class="UNX-swatch-wrapper">'.concat(F,"</div>")),C&&(f=C),['<div id="'.concat(c,'" data-id="').concat(c,'" data-prank="').concat(e,'" data-item="product" class="UNX-product-col ').concat(b," ").concat(d,'">'),,'<div class="UNX-images-block">'.concat(f,"</div>"),'<div class="UNX-product-content">','<h3 class="UNX-product-title">'.concat(i,"</h3>"),m,y,'<div class="UNX-price-row">'.concat(g," ").concat(v,"</div>"),"</div>","</div>"].join("")},productItemClass:"product-item",productType:"SEARCH",gridCount:1,onProductClick:function(t,e){},productAttributes:["title","uniqueId","price","sku","imageUrl","displayPrice","salePrice","sortPrice","productDescription","unbxd_color_mapping","colorName","color"],attributesMap:{unxTitle:"title",unxImageUrl:"imageUrl",unxPrice:"salePrice",unxStrikePrice:"displayPrice",unxId:"uniqueId",unxDescription:"productDescription"},defaultImage:"https://libraries.unbxdapi.com/sdk-assets/defaultImage.svg",tagName:"DIV",htmlAttributes:{class:"UNX-search-results-block UNX-result-wrapper"},events:{}},searchQueryParam:"q",browseQueryParam:"p",defaultFilters:null,noResults:{template:function(t){return'<div class="UNX-no-results"> No Results found '.concat(t," </div>")}},onEvent:function(t,e){},startPageNo:0,productView:{enabled:!0,el:null,template:function(t,e){var a=!this.getSearchResults(),n=e.selectedViewTypeClass,s=e.viewTypeClass,i=this.testIds,r=i.UNX_gridBtn,c=i.UNX_listBtn,o="UNX-list-btn ".concat(s),l="UNX-grid-btn ".concat(s),u="data-test-id=".concat(r),d="data-test-id=".concat(c);"LIST"===t&&(o+=" ".concat(n)),"GRID"===t&&(l+=" ".concat(n));var p='<button id="listBtn" class="'.concat(o,'" ').concat(d,' data-view-action="LIST" >List</button>'),h="<button ".concat(u,' id="gridBtn" class="').concat(l,'" data-view-action="GRID" >Grid</button>');return a&&(p="<button ".concat(d,' id="listBtn" disabled class="').concat(o,' disabled-btn" data-view-action="LIST" >List</button>'),h="<button ".concat(u,' id="gridBtn" disabled class="').concat(l,'  disabled-btn"data-view-action="GRID" >Grid</button>')),"".concat(p," ").concat(h)},action:"click",viewTypeClass:"UNX-product-view",selectedViewTypeClass:"UNX-selected-product-view",defaultViewType:"GRID",tagName:"DIV",htmlAttributes:{class:"product-view-container"},events:{}},loader:{template:function(){return'<div class="UNX-loader">Loading search results....</div>'},el:null},variants:void 0,extraParams:{version:"V2"},spellCheck:{enabled:!0,el:null,template:function(t,e,a){var n=a.start,s=a.productsLn,i=a.numberOfProducts,r=this.options.spellCheck,c=r.selectorClass,o=r.enabled,l=t;if("SEARCH"!==this.options.productType){var u=this.getCategoryId()||"",d=decodeURIComponent(u).split(">");l=d[d.length-1]||d[0]}var p=this.testIds.UNX_spellCheck,h=e?'<p class="UNX-no-result"> Your search "<strong>'.concat(e,'</strong>" did not match any products. Did you mean <button data-test-id="').concat(p,'" data-action="getSuggestion" class="').concat(c,'">').concat(t,"</button>? </p>"):"",f="",g="";return i>0&&(g='<span class="UNX-result-info">  -  '.concat(n+1," to ").concat(s+n," of ").concat(i," products</span>")),a&&l&&(o||(l=e||t),f='<p class="UNX-suggestion-p">Showing results for <strong>'.concat(l,"</strong> ").concat(g,"</p>")),['<div class="UNX-spellcheck-block">',h,f,"</div>"].join("")},selectorClass:"UNX-suggestion",tagName:"DIV",htmlAttributes:{class:"UNX-spellcheck-wrapper"},events:{}},breadcrumb:{enabled:!0,el:null,selectorClass:"UNX-bread-crumb",template:d,tagName:"DIV",htmlAttributes:{class:"UNX-breadcrumbs-block"},events:{}},sort:{enabled:!0,el:null,selectedSortClass:"UNX-selected-sort",sortClass:"UNX-sort-item",template:function(t,e){var a="",n=e.options,s=e.sortClass,i=e.selectedSortClass,r=this.testIds.UNX_unbxdSorter;return n.forEach((function(e){var n=e.value,s=e.text;a+=n==t?'<option value="'.concat(n,'" class="').concat(i,'" selected>').concat(s,"</option>"):'<option value="'.concat(n,'">').concat(s,"</option>")})),['<div class="UNX-sort-block">','<span class="UNX-sort-header">Sort By</span>','<label class="UNX-hidden" for="unxSortSelect">Sort By</label>','<select data-test-id="'.concat(r,'" name="unxSortSelect" data-action="changeSort" id="unxSortSelect" class="').concat(s,'">'),'<option value="">Relevancy</option>',a,"</select>","</div>"].join("")},options:[{value:"price desc",text:"Price High to Low"},{value:"price asc",text:" Price Low to High"}],action:"change",tagName:"DIV",htmlAttributes:{class:"UNX-sort-block-lb"},events:{}},selectedFacets:{enabled:!0,selectedFacetClass:"UNX-selected-facet-btn",el:null,template:c,itemTemplate:r,clearAllText:"Clear All",tagName:"DIV",htmlAttributes:{class:"UNX-selected-facet-lb"},events:{},facetAction:"click",clearFacetsSelectorClass:"UNX-clear-facet",removeFacetsSelectorClass:"UNX-remove-facet"},facet:{facetsEl:null,facetTemplate:function(t,e,a,n,s){var i=t.displayName,r=t.facetName,c=(t.multiLevelField,t.facetType),o=t.values,l=s.facetClass,u=s.applyMultipleFilters,d=s.isCollapsible,p=s.isSearchable,h=s.searchPlaceHolder,f=s.textFacetWrapper,g=s.enableViewMore,v=s.viewMoreText,b=s.viewMoreLimit,y=s.applyButtonText,m=s.clearButtonText,S=this.options,F=S.actionBtnClass,C=S.actionChangeClass,w=this.cssList,N=(w.openBtn,w.closeBtn,""),U="",P=this.getSelectedFacets()[r],A=!!(P&&P.length>0);g&&"text"===c&&o.length>b&&(U="UNX-view-more",N='<div class="UNX-view-more-row "><button class="'.concat(F,'" data-facet-name="').concat(r,'" data-action="viewMore" data-id="').concat(v[0],'">').concat(v[0],"</button></div>"));var O="",E="";A&&(O='<button class="UNX-facet-clear '.concat(l,' "data-facet-action="deleteFacet" data-facet-name="').concat(r,'">').concat(m,"</button>")),u&&A&&(E='<button class="UNX-facet-primary '.concat(l,' "data-facet-action="applyFacets" >').concat(y,"</button>"));var I="",R="";return d&&(I=a?'<div class="UNX-facet-header '.concat(F,' UNX-facet-open"  data-facet-name="').concat(r,'" data-facet-action="facetClose"> <h3>').concat(i,"</h3> </div>"):'<div class="UNX-facet-header '.concat(F,' UNX-facet-close"  data-facet-name="').concat(r,'" data-facet-action="facetOpen"> <h3>').concat(i,"</h3></div>")),p&&null!==n&&(R='<div class="UNX-searchable-facets"><label class="UNX-hidden" for="'.concat(r,'_searchBox">').concat(h,'</label><input  id="').concat(r,'_searchBox" name="').concat(r,'_searchBox" data-test-id="').concat(this.testIds.UNX_searchFacets,'" class="UNX-facet-search ').concat(C,'" value="').concat(n,'"  data-facet-name="').concat(r,'" data-facet-action="searchFacets" type="text" placeholder="').concat(h,'"/></div>')),['<div class="UNX-text-facet-wrap">',I,'<div class="UNX-facets-all">',R,'<div class="UNX-facets '.concat(f," ").concat(U,'">').concat(e,"</div>"),N,'<div class="UNX-facet-footer">'.concat(E," ").concat(O,"</div>"),"</div>","</div>"].join("")},facetItemTemplate:function(t,e,a){var n=t.facetName,s=t.isSelected,i=e.name,r=e.count,c=e.dataId,o=this.options.facet,l=o.facetClass,u=o.selectedFacetClass,d=this.testIds.UNX_uFilter;a&&a.length>0&&i.toUpperCase().indexOf(a.toUpperCase())<0&&(l+=" UNX-search-hidden");var p="changeFacet";return s&&(l+=" ".concat(u),p="deleteFacetValue"),['<button data-test-id="'.concat(d,'" data-facet-name="').concat(n,'" data-facet-action="').concat(p,'" class="UNX-change-facet ').concat(l,'" data-id="').concat(c,'">'),'<span class="UNX-facet-text">'.concat(i,'</span> <span class="UNX-facet-count">(').concat(r,")</span>"),"</button>"].join("")},facetMultiSelect:!0,facetClass:"UNX-facets-block",facetAction:"click",selectedFacetClass:"UNX-selected-facet-btn",selectedFacetsEl:null,selectedFacetTemplate:c,selectedFacetItemTemplate:r,clearAllText:"Clear All",rangeTemplate:function(t,e,a){var n=this,s=t.facetName,i=t.values,r="",c=a.facetClass,o=a.selectedFacetClass,l=a.applyMultipleFilters,u=a.applyButtonText,d=a.clearButtonText,p=e.length>0;i.forEach((function(t){var e=t.from,a=t.end,i=n.isSelectedRange(s,t)?"UNX-selected-facet-btn ".concat(c," ").concat(o):"".concat(c);r+=['<button class="'.concat(i,' UNX-range-facet UNX-change-facet" data-action="setRange" data-facet-name="').concat(s,'" data-start="').concat(e.dataId,'" data-end="').concat(a.dataId,'" >'),'<span class="UNX-facet-text">'.concat(e.name,"  -  ").concat(a.name,"</span>"),'<span class="UNX-facet-count">('.concat(e.count,")</span>"),"</button>"].join("")}));var h="",f="";return p&&(l&&(f='<button class="UNX-default-btn '.concat(c,' UNX-facet-primary" data-action="applyRange"> ').concat(u,"</button>")),h='<button class="UNX-default-btn UNX-facet-clear  '.concat(c,'" data-action="clearRangeFacets">').concat(d,"</button>")),['<div class="UNX-range-wrapper">',r,'<div class="UNX-price-action-row">',f,h,"<div>","</div>"].join("")},rangeWidgetConfig:{minLabel:"",maxLabel:"",prefix:"$"},facetMultilevel:!0,facetMultilevelName:"Category",multiLevelFacetSelectorClass:"UNX-multilevel-facet",multiLevelFacetTemplate:u,facetDepth:4,clearFacetsSelectorClass:"UNX-clear-facet",removeFacetsSelectorClass:"UNX-remove-facet",onFacetLoad:function(t){},applyMultipleFilters:!1,applyButtonText:"Apply",clearButtonText:"clear",isCollapsible:!0,isSearchable:!0,searchPlaceHolder:"Search Filter",textFacetWrapper:"UNX-facets-item",defaultOpen:"ALL",enableViewMore:!1,viewMoreText:["show all","show less"],viewMoreLimit:3,tagName:"DIV",htmlAttributes:{class:"UNX-facets-results-block"},events:{}},pagination:{enabled:!0,el:null,template:function(t){var e=this.options.pagination,a=e.type;return"CLICK_N_SCROLL"===a?l.bind(this)(t,e):"FIXED_PAGINATION"===a?o.bind(this)(t,e):""},pageClass:"UNX-page-items",selectedPageClass:"UNX-selected-page-item",type:"CLICK_N_SCROLL",infinteScrollTriggerEl:window,heightDiffToTriggerNextPage:100,onPaginate:function(t){},action:"click",pageLimit:6,tagName:"DIV",htmlAttributes:{class:"UNX-pagination-size-block"},events:{}},pagesize:{enabled:!0,pageSize:12,options:[8,12,16,20,24],pageSizeClass:"UNX-pagesize",selectedPageSizeClass:"UNX-selected-pagesize",action:"change",template:p,el:null,tagName:"DIV",htmlAttributes:{class:"UNX-page-size-block"},events:{}},banner:{enabled:!0,el:null,template:function(t,e){var a=e.openNewTab,n=t.map((function(t){var e=t.imageUrl,n=t.landingUrl,s=t.bannerHtml;if(s)return s;var i="";return n&&(i+="href=".concat(n)),a&&(i+='  target="_blank"'),'<a class="UNX-banner-wrap" '.concat(i,' ><img style="max-width:100%" src="').concat(e,'"/></a>')})).join("");return"".concat(n)},count:1,openNewTab:!1,tagName:"DIV",htmlAttributes:{class:"UNX-banner-block"},events:{}},swatches:{enabled:!1,attributesMap:{},swatchClass:"UNX-swatch-btn",template:function(t,e,a){var n=this,s=t.swatchImgs,i=void 0===s?[]:s,r="",c="",o="",l=e.swatchClass,u=this.testIds.UNX_swatchClrBtn,d=a.unxTitle;return i.length>1&&(i.forEach((function(t,e){var a=n.generateRid("unx_swatch_"),s=0===e?"":" UNX-swatch-hidden",i=0===e?" UNX-selected-swatch":"",c=t.split("::");c&&(r+=['<button value="swatch color '.concat(c[0],'" data-test-id="').concat(u).concat(e,'" data-swatch-id="').concat(a,'" data-action="changeSwatch" class="').concat(l," ").concat(a," ").concat(i,'" style="background-color:').concat(c[0],'"> swatch color ').concat(c[0]," </button>")].join(""),o+='<div id="'.concat(a,'" class="UNX-img-wrapper ').concat(s,'"><img alt="').concat(d," for the ").concat(c[0],'" class="UNX-img-block" src="').concat(c[1],'"/></div>'))})),c='<div class="UNX-swatch-color-list">'.concat(r,"</div>")),{btnList:c,imgList:o}}},unbxdAnalytics:!1,hashMode:!1,updateUrls:!0,actionBtnClass:"UNX-action-item",actionChangeClass:"UNX-action-change",onAction:function(t,e){},onQueryRedirect:function(t,e){if(e){var a=e.value;return"url"===e.type&&(location.href=a),!1}}};var f=function(){var t=this.getBanners(),e=this.options.banner;this.bannerWrapper.innerHTML=this.options.banner.template(t,e)},g=function(t){var e=t.target;this.viewState.lastDidYouMean="";var a=("click"===this.options.facet.facetAction?e:e.options[e.selectedIndex]).dataset,n=a.facetName,s=a.facetAction,i=a.id,r=a.action,c=a.end,o=a.start,l=this.getStateFromUrl(),u=this.getSelectedFacets(),d=u?Object.keys(u).length:0,p=Object.keys(l.selectedFacets).length,h=this.options,f=h.productType,g=h.facet.applyMultipleFilters,v=this.events,b=this.actions,y=this.state.rangeFacet[n],m=Object.keys(l.rangeFacet);if(s===b.changeFacet){var S=this.getSelectedFacet(n),F={selectedFacetName:n,selectedFacetId:i,facetData:S};this.viewState.lastAction="addedAFacet",this.options.onEvent(this,v.facetClick,{facetName:n,facetData:S}),this.updateFacets(F),this.getCallbackActions({facetName:n,facetAction:s,id:i},"facetClick")}if("deleteSelectedFacetValue"===s&&this.findSelectedFacet(n)&&(this.viewState.lastAction="deletedAfacet",this.deleteAFacet.bind(this)(n,i),this.options.onEvent(this,v.deleteFacetValue,{facetName:n}),this.getCallbackActions({facetName:n,facetAction:s,id:i},"facetClick"),this.setPageStart(0),this.getResults()),s===b.deleteFacetValue&&this.findSelectedFacet(n)){this.viewState.lastAction="deletedAfacet",this.deleteAFacet.bind(this)(n,i),this.options.onEvent(this,v.deleteFacetValue,{facetName:n}),this.getCallbackActions({facetName:n,facetAction:s,id:i},"facetClick");var C=u[n].length;p>0&&1===d&&0===C&&g&&(this.setPageStart(0),this.getResults())}s===b.deleteFacet&&(this.findSelectedFacet(n)&&(this.viewState.lastAction="deletedAfacet",this.deleteAFacet.bind(this)(n),this.options.onEvent(this,v.deleteFacet,{facetName:n}),this.getCallbackActions({facetName:n,facetAction:s,id:i},"facetClick"),l.selectedFacets[n]&&(this.viewState.lastAction="clearAFacet",this.setPageStart(0),this.getResults())));if("applyFacets"===s&&(this.viewState.lastAction="applyFacets",this.setPageStart(0),this.getResults()),"clearAllFacets"===s&&(this.viewState.lastAction="clearAllFacets",this.state.selectedFacets=[],this.state.rangeFacet=[],this.setPageStart(0),this.getResults()),"deleteSelectedRange"===s){var w=a.facetName,N=a.id,U=N.replace(/[^\w\s]/gi,"").split(" TO ");this.setRangeFacet({start:U[0],end:U[1],facetName:w,applyMultiple:!0}),this.getCallbackActions({facetName:w,facetAction:s,id:N},"facetClick"),this.setPageStart(0),this.getResults()}if(r===b.setCategoryFilter&&("SEARCH"===f?(this.setCategoryFilter(a),this.options.onEvent(this,v.setCategoryFilter,a)):this.setCategoryId(a,this),this.setPageStart(0),this.getResults(),this.getCallbackActions(a,"facetClick")),r===b.clearCategoryFilter&&("SEARCH"===f?(this.deleteCategoryFilter(a),this.options.onEvent(this,v.deleteCategoryFilter,a)):this.setCategoryId(a,this),this.setPageStart(0),this.getResults(),this.getCallbackActions(a,"facetClick")),"setRange"===r){var P=!1;y&&1===y.length&&m.length>0&&(P=this.isSelectedRange(n,{from:{name:o},end:{name:c}})),P||this.setRangeFacet({start:o,end:c,facetName:n,applyMultiple:!0}),P&&(this.state.rangeFacet=[],this.applyRangeFacet()),g||(this.setPageStart(0),this.applyRangeFacet()),this.getCallbackActions({facetName:n,facetAction:s,id:i},"facetClick")}"clearRangeFacets"===r&&(this.state.rangeFacet=[],this.renderFacets(),m.length>0&&this.applyRangeFacet()),r===b.applyRange&&(this.applyRangeFacet(),this.options.onEvent(this,r,{facetName:n}),this.getCallbackActions({facetName:n},"facetClick")),r===b.clearPriceRange&&n&&(this.clearARangeFacet(n),this.getResults.bind(this)(),this.options.onEvent(this,r,{facetName:n}),this.getCallbackActions({facetName:n},"facetClick")),this.viewState.lastAction=r},v=function(){var t=this,e=this.options.facet,a=e.defaultOpen,n=e.applyMultipleFilters,s=(e.isCollapsible,this.viewState),i=s.expandedFacets;if("updatedRangeSlider"===s.lastAction&&n)return!1;var r=this.getAllFacets(),c=this.facetWrappers,o=this.getSelectedFacets();c.forEach((function(e){e.innerHTML="",r.forEach((function(n,s){var r=n.facetType,c=n.facetName;void 0===i[c]&&"ALL"===a&&(i[c]=!0),"FIRST"===a&&0==s&&(i[c]=!0);var l=t.isExpandedFacet(c),u=t.getSearchFacetsText(c)||"",d=o[c];"text"===r&&(e.innerHTML+=t.renderTextFacet(n,d,l,u)),"range"===r&&(e.innerHTML+=t.renderRangeFacet(n,l,"")),"category"===r&&(e.innerHTML+=t.renderMultiLevelFacet(n,l,u)),t.viewState.facetElementMap[c]=c}))})),this.options.facet.onFacetLoad.bind(this)(r)},b=function(t,e,a,n,s){var i=[],r=t.facetName,c=t.values,o=void 0===c?[]:c,l=this.cssList,u=l.openFacet,d=l.closeFacet,p=this,h=this.options.facet,f=h.isCollapsible;if(o.length>0&&(i=o.map((function(a,s){var i=a.dataId,r=!1;return e&&(r=e.some((function(t){return t.dataId===i}))),r?(t.isSelected=!0,p.options.facet.facetItemTemplate.bind(p)(t,a,n,h)):(t.isSelected=!1,p.options.facet.facetItemTemplate.bind(p)(t,a,n))}))),s)return i.join("");var g=this.options.facet.facetTemplate.bind(this)(t,i.join(""),a,n,h),v=a?u:d;return f||(v=""),'<div class="UNX-facet-item-d '.concat(r," ").concat(v,'">').concat(g,"</div>")},y=function(){for(var t=this,e=this.getSelectedFacets(),a=this.getSelectedRanges(),n=Object.keys(e),s="",i=this.options,r=i.selectedFacets,c=i.facet,o=c.selectedFacetItemTemplate?c.selectedFacetItemTemplate.bind(this):r.itemTemplate.bind(this),l=function(a){var i=n[a],l=t.isCategoryFacet(i),u=e[i];l||u.forEach((function(t){var e=t.name,a=t.count,n=t.dataId;s+=o({facetName:i,facetType:"text"},{name:e,dataId:n||e,count:a||0},c,r)}))},u=0;u<n.length;u++)l(u);for(var d=Object.keys(a),p=function(t){var e=d[t];a[e].forEach((function(t){s+=o({facetName:e,facetType:"range"},{name:t.replace(/[^\w\s]/gi,""),dataId:t},c,r)}))},h=0;h<d.length;h++)p(h);var f=c.selectedFacetTemplate?c.selectedFacetTemplate.bind(this):r.template.bind(this);this.selectedFacetWrappers.forEach((function(t){t.innerHTML=f(s,c,r)}))},m=function(t,e){var a="",n=this,s=this.cssList,i=s.openFacet,r=s.closeFacet,c=t.facetName,o=this.options.facet,l=o.isCollapsible,u=this.getBreadCrumbsList(c),d=n.options.facet.multiLevelFacetTemplate.bind(this)(t,u,"",o);a+=n.options.facet.facetTemplate.bind(n)(t,d,e,null,o);var p=e?i:r;return l||(p=""),'<div class="'.concat(c," UNX-facet-item-d UNX-multilivel-facets-block UNX-multilevel-block ").concat(p,'">').concat(a,"</div>")},S=function(t,e){var a=t.facetName,n=this.cssList,s=n.openFacet,i=n.closeFacet,r=this.options.facet,c=r.isCollapsible,o=this.state.rangeFacet[a]||[],l=this.options.facet.rangeTemplate.bind(this)(t,o,r),u=this.options.facet.facetTemplate.bind(this)(t,l,e,null,r),d=e?s:i;return c||(d=""),'<div class="'.concat(a," UNX-facet-item-d range-facets-block ").concat(d,'">').concat(u,"</div>")},F=function(t,e){var a=this.getSelectedRanges(t),n=e.from,s=e.end,i="[".concat(n.name," TO ").concat(s.name,"]");return!!(a&&a.indexOf(i)>=0)},C=function(){this.state.selectedFacets={},this.state.rangeFacet=[],this.state.categoryFilter={}},w=function(t){var e=!1;return!0===this.viewState.expandedFacets[t]&&(e=!0),e},N=function(t,e){this.viewState.searchFacetsText[t]=e,this.reRenderTextFacet(t)},U=function(t){return this.viewState.searchFacetsText[t]||""},P=function(t){var e=this.options.facet.facetClass,a=this.getSearchFacetsText(t)||"";document.querySelectorAll(".".concat(t," .").concat(e)).forEach((function(t){var e=(t.dataset||{}).id;e&&e.toUpperCase().indexOf(a.toUpperCase())>=0?t.classList.remove("UNX-search-hidden"):t.classList.add("UNX-search-hidden")}))},A=function(t){this.setRangeFacet(t);var e=t.facetName;t.start,t.end;this.getCallbackActions({facetName:e,facetAction:"changeFacet",id:e},"facetClick"),this.viewState.lastAction="updatedRangeSlider",this.setPageStart(0),this.applyRangeFacet()},O=function(){if(this.options.facet.applyMultipleFilters){var t=this.getStateFromUrl(),e=t.selectedFacets,a=t.selectedRanges;this.state.selectedFacets=e,this.state.selectedRanges=a}},E=function(){var t=this,e=this.getSearchResults();if(!e)return"";var a=e.products,n=this,s=this.options.swatches,i=this.options.products.gridCount,r=this.viewState.productViewType,c="",o=Number(this.state.startPageNo),l="";return"GRID"===r&&i&&i>1?a.forEach((function(e,a){var u=a%i;0===u&&(c+='<div class="UNX-row">');var d=a+o+1,p=t.mapProductAttrs(e);s.enabled&&(l=t.renderSwatchBtns(e)),c+=n.options.products.template.bind(n)(p,d,l,r,t.options.products),u===i-1&&(c+="</div>")})):c=a.map((function(e,a){var i=a+o+1,c=t.mapProductAttrs(e);return s.enabled&&(l=t.renderSwatchBtns(e)),n.options.products.template.bind(n)(c,i,l,r,t.options.products)})).join(""),c},I=function(t){var e=t.path||t.composedPath&&t.composedPath(),a=this.options.products,n=a.productItemClass,s=a.attributesMap,i=n.replace(".",""),r=t.target.dataset,c=e.find((function(t){return t.className.indexOf(i)>=0})),o=r||{},l=o.action,u=o.swatchId;if(l===this.actions.changeSwatch&&u)return c.querySelectorAll(".UNX-img-wrapper").forEach((function(t){var e=c.querySelector(".".concat(t.id));t.id===u?(t.classList.remove("UNX-swatch-hidden"),c.querySelector(".".concat(u)).classList.add("UNX-selected-swatch")):(t.classList.add("UNX-swatch-hidden"),e.classList.remove("UNX-selected-swatch"))})),this.options.onEvent(this,r.action),!1;var d=null;(r=c.dataset).id&&(d=this.getProductByPropValue(s.unxId,r.id)),d&&c&&(d.prank=c.dataset.prank),this.options.products.onProductClick(d,t),this.getCallbackActions(d,"click")};var R=function(t){return this.options.noResults.template(t)},T=function(t){var e=this.options.products.attributesMap;return Object.keys(e).forEach((function(a){var n=t[a],s=e[a];n||(t[a]=t[s])})),t};var k=function(){var t=this.options.productView;if(t.el){var e=this.viewState.productViewType,a=this.getSearchResults();a&&0===a.numberOfProducts?this.productViewTypeWrapper.innerHTML="":this.productViewTypeWrapper.innerHTML=this.options.productView.template.bind(this)(e,t)}},j=function t(){var e={},a=!0,n=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(a=arguments[0],n++);for(var i=function(n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(a&&"[object Object]"===Object.prototype.toString.call(n[s])?e[s]=t(!0,e[s],n[s]):e[s]=n[s])};n<s;n++){var r=arguments[n];i(r)}return e};function L(t){var e=t.target,a=this.options.productView.action,n=this.viewState.productViewType,s=("click"===a?e:e.options[e.selectedIndex]).dataset.viewAction;if(this.checkFacets(),n!==s){this.viewState.productViewType=s;var i=this.options.extraParams;this.options.extraParams=j(!0,{},i,{viewType:s}),this.setPageStart(0),this.state.isBack=!1,this.viewState.lastAction="viewType",this.getResults.bind(this)()}}var x=function(){var t=this.options.pagination,e="";if("INFINITE_SCROLL"!==t.type){var a=this.getPaginationInfo();a&&(e=t.template.bind(this)(a))}return e};var X=function(){var t,e,a,n=this.options.pagination.heightDiffToTriggerNextPage;a=document,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight)-20<=(t=0,e=0,"number"==typeof window.pageYOffset?(e=window.pageYOffset,t=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(e=document.body.scrollTop,t=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(e=document.documentElement.scrollTop,t=document.documentElement.scrollLeft),[t,e])[1]+window.innerHeight+n&&(this.viewState.isInfiniteStarted||this.state.loading||(this.viewState.lastAction="pagination",this.renderNewResults("next")))},M=function(t,e){t.viewState.lastAction="pagination",t.setPageStart(e),t.getResults(),t.options.onEvent(t,t.events.pageNext,{value:e})};function _(t){var e=this.getPaginationInfo(),a=this.options,n=a.pagination,s=a.onEvent,i=e.start,r=(e.productsLn,e.numberOfProducts,e.rows),c=e.isNext,o=e.isPrev;if("CLICK_N_SCROLL"===n.type||"INFINITE_SCROLL"===n.type){var l=i+r;c&&(this.viewState.isInfiniteStarted=!0,M(this,l))}else{if(t===this.actions.next)c&&M(this,i+r);if(t===this.actions.prev){var u=i-r;o&&(this.viewState.lastAction="pagination",M(this,u),s(this,this.events.pagePrev,{value:u}))}}}function B(t){var e=t.target.dataset,a=e.pageAction,n=e.pageNo;this.checkFacets(),this.viewState.lastDidYouMean="","paginate"===a?(this.viewState.lastAction="pagination",this.setPageStart(n),this.getResults()):this.renderNewResults(a)}function V(t){var e=t.target;this.viewState.lastDidYouMean="";("click"===this.options.sort.action?e:e.options[e.selectedIndex]).dataset;var a=e.dataset,n=a.action,s=a.value,i=e.value||s||"",r=this.events.changeSort;this.checkFacets(),n===this.actions.clearSort&&(this.applySort(""),this.options.onEvent(this,n)),n===this.actions.changeSort&&(this.applySort(i),this.options.onEvent(this,r,{sort:i}))}var D=function(){var t=this,e=this.getSearchResults(),a=this.options.sort;this.sortWrappers.forEach((function(n){var s="";e&&e.numberOfProducts>0&&(s=t.options.sort.template.bind(t)(t.getSelectedSort(),a)),n.innerHTML=s}))},z=function(t){var e=this.options.searchBoxEl.value;if(!e.replace(/\s/g,"").length)return!1;this.options.productType="SEARCH",(e=0===e.indexOf("#")?e.replace("#",""):e)?(this.resetAll(),this.changeInput(e,this.events.changeInput),this.options.products.productType="SEARCH",this.viewState.loadedFromSuggestion=!1,this.state.selectedSort="",this.setPageStart(0),this.resetViewState(),this.getResults()):this.searchResultsWrapper.innerHTML=null},W=function(t){var e=this.state.userInput,a=this.getPaginationInfo()||{},n=this.getDidYouMeanFromResponse(),s=this.options.pagination.type,i=this.options.spellCheck,r=(i.spellCheck,i.enabled),c=this.viewState,o=c.loadedFromSuggestion,l=c.lastDidYouMean;if("FIXED_PAGINATION"!==s&&a){var u=a.start,d=a.productsLn;a.productsLn=d+u,a.start=0}var p=n.length>0?n[0].suggestion:"",h="";p&&!o?(this.viewState.lastDidYouMean=e,this.viewState.loadedFromSuggestion=!0,r&&this.getResults(p)):this.viewState.lastDidYouMean="",h=this.options.spellCheck.template.bind(this)(e,l,a),!r&&p&&(h=this.options.spellCheck.template.bind(this)(p,e,a)),this.spellCheckWrappers.forEach((function(t){t.innerHTML=h}))},H=function(t){var e=this.getSpellCheckSuggested(),a=e.length,n=(t.target||{}).dataset,s=this.state.userInput;n&&"getSuggestion"===n.action&&(this.resetAll(),this.setPageStart(0),this.getResults(a?e[0]:s),this.viewState.lastDidYouMean=null,this.viewState.loadedFromSuggestion=!1)};function Q(t){}function Y(){var t=this,e=this.getSelectedMultilevelFacet(),a="";return e.forEach((function(e){var n=t.getBreadCrumbsList(e),s=t.options.breadcrumb;a+=t.options.breadcrumb.template(n,s)})),a}var q=function(t){var e=this.getSwatches(t,this.options.swatches.attributesMap),a=this.options.swatches;return this.options.swatches.template.bind(this)(e,a,t)},G=function(t){var e=t.target;this.viewState.lastDidYouMean="";var a=("click"===this.options.pagesize.action?e:e.options[e.selectedIndex]).id,n=this.events.pageSizeChange;a&&(this.checkFacets(),this.setPageSize(Number(a)),this.getResults.bind(this)(),this.options.onEvent(this,n,{count:a}))},K=function(){var t=this.options.pagesize,e=t.pageSize;this.getQueryParams()&&(e=this.state.pageSize);var a=this.getSearchResults();a&&0===a.numberOfProducts?this.pageSizeWrapper.innerHTML="":this.pageSizeWrapper.innerHTML=this.options.pagesize.template.bind(this)(e,t)},$=function(t){Unbxd.track("search",{query:t})},J=function(t){var e=t.uniqueId,a=t.sku,n=t.prank;Unbxd.track("click",{pid:e||a,prank:n,requestId:null})},Z=function(){var t=this.getSearchResults(),e=this.getSearchQuery(),a=this.options.productType,n=t.products,s={pids_list:[]};if("SEARCH"===a&&(s.query=e),n){var i=[];n.forEach((function(t){var e=t.sku,a=t.uniqueId||e;i.push(a)})),s.pids_list=i,Unbxd.track("search_impression",s)}},tt=function(t,e){var a=this.getSelectedFacets(),n=this.state.rangeFacet,s=this.state.categoryFilter,i=Object.keys(a),r=Object.keys(n),c=Object.keys(s),o={};i.forEach((function(t){var e=a[t],n=[];e.forEach((function(t){n.push(t.name)})),o[t]=n})),r.forEach((function(t){var e=r[t];o[t]=e})),c.forEach((function(t){var e=s[t].join(">");o[t]=e}));var l=this.getSearchQuery();Unbxd.track("facets",{query:l,facets:o})},et=function(t,e){window.UnbxdAnalyticsConf&&Unbxd.track("categoryPage",window.UnbxdAnalyticsConf)},at=function(t,e){var a=window.Unbxd||null,n=this.options.unbxdAnalytics;if(!a||!n||a&&!a.track)return!1;if(t)switch(e){case"CHANGE_INPUT":this.trackSearch(t);break;case"click":this.trackProductClick(t);break;case"AFTER_API_CALL":this.trackImpression();break;case"facetClick":this.trackFacetClick(t,e);case"categoryPage":this.trackCategoryPageLoad(t,e)}},nt={unxPageSize:"unxPageSize"},st=function(){var t=this,e=this.options,a=e.onEvent,n=e.spellCheck,s=e.pagination,i=e.productType,r=e.searchBoxEl,c=e.loader,o=e.breadcrumb,l=e.productView,u=(e.facet,this.events),d=u.beforeRender,p=u.beforeNoResultRender,h=u.afterNoResultRender,f=u.afterRender;a(this,d),c.el&&(c.el.innerHTML="");var g=this.getSearchResults(),v=this.getQueryParams()||{},b=this.getSearchQuery(),y="UNX-no-results-wrap",m=this.viewState,S=m.lastAction,F=m.productViewType;"SEARCH"===i&&r&&(r.value=this.state.userInput),"SEARCH"!==i&&r&&(r.value="");var C=this.searchResultsWrapper,w=this.paginationWrappers,N=this.breadcrumbWrapper,U=this.viewState,P=U.noResultLoaded,A=U.isInfiniteStarted;if(g&&0===g.numberOfProducts)a(this,p),this.viewState.noResultLoaded=!0,C.classList.add(y),C.innerHTML=this.renderNoResults(b),v.filter||this.renderFacets(),a(this,h);else{var O="LIST"===F?"UNX-list-block":"UNX-grid-block";C.classList.remove("UNX-list-block"),C.classList.remove("UNX-grid-block"),C.classList.add(O),C.classList.remove(y),A?(this.viewState.isInfiniteStarted=!1,P?(this.viewState.noResultLoaded=!0,C.innerHTML=this.renderSearch()):C.innerHTML+=this.renderSearch()):(C.innerHTML="",C.innerHTML=this.renderSearch())}this.renderFacets(),this.renderSelectedFacets(),this.renderBannerUI(),l.enabled&&this.renderProductViewTypeUI(),this.renderPageSize(),this.renderSort(),"INFINITE_SCROLL"!==s.type?w.forEach((function(e){e.innerHTML=t.renderPagination()})):w&&w.forEach((function(t){t.innerHTML=""})),o.enabled&&(N.innerHTML=this.renderBreadCrumbs());var E=this.getSpellCheckSuggested();if(n.el&&this.renderDidYouMean(E),"pagination"===S){if("INFINITE_SCROLL"==s.type){var I=this.options.products.productItemClass,R=document.querySelector(".".concat(I)).offsetHeight;window.scrollBy({top:R,left:0,behavior:"smooth"})}s.onPaginate.bind(this)(this.getPaginationInfo())}a(this,f)},it=function(t,e){var a;return function(){var n=this,s=arguments;clearTimeout(a),a=setTimeout((function(){return t.apply(n,s)}),e)}};var rt,ct=function(){var t=this,e=this.options,a=e.searchButtonEl,n=e.searchTrigger,s=e.products,i=e.facet,r=e.productView,c=e.pagination,o=e.sort,l=e.pagesize,u=e.spellCheck,d=e.searchBoxEl,p=e.actionChangeClass,h=e.actionBtnClass,f=e.breadcrumb,g=e.selectedFacets;if(d&&d.addEventListener("keydown",(function(e){var a=e.target.value;13===e.keyCode&&""!==a&&t.setInputValue.bind(t)()})),c.enabled&&this.paginationWrappers.forEach((function(e){t.delegate(e,c.action,".".concat(c.pageClass),t.paginationAction.bind(t))})),i.facetsEl&&this.facetWrappers.forEach((function(e){t.delegate(e,i.facetAction,".".concat(i.facetClass),t.findChangedFacet.bind(t)),t.delegate(e,"change","."+p,t.extraActionsChange.bind(t)),t.delegate(e,"keyup","."+p,t.extraActionsChange.bind(t)),t.delegate(e,"click","."+h,t.extraActions.bind(t))})),a&&a.addEventListener(n,this.setInputValue.bind(this)),u.el&&this.spellCheckWrappers.forEach((function(e){t.delegate(e,"click",".".concat(u.selectorClass),t.setSuggestion.bind(t))})),this.delegate(this.searchResultsWrapper,"click",".".concat(s.productItemClass),this.onProductItemClick.bind(this)),o.el&&this.sortWrappers.forEach((function(e){t.delegate(e,o.action,".".concat(o.sortClass),t.sortAction.bind(t))})),i.selectedFacetsEl?this.selectedFacetWrappers.forEach((function(e){t.delegate(e,i.facetAction,".".concat(i.selectedFacetClass),t.findChangedFacet.bind(t))})):this.selectedFacetWrappers.forEach((function(e){t.delegate(e,g.facetAction,".".concat(g.selectedFacetClass),t.findChangedFacet.bind(t))})),this.breadcrumbWrapper&&this.delegate(this.breadcrumbWrapper,"click","."+f.selectorClass,this.findChangedFacet.bind(this)),this.productViewTypeWrapper&&this.delegate(this.productViewTypeWrapper,r.action,"."+r.viewTypeClass,this.onPageViewTypeClick.bind(this)),"INFINITE_SCROLL"===this.options.pagination.type&&document.addEventListener("scroll",it((function(){t.onInfiniteScroll.bind(t)()}),1e3)),this.delegate(this.pageSizeWrapper,l.action,".".concat(l.pageSizeClass),this.onClickPageSize.bind(this)),!this.viewState.initialised){this.options.hashMode?window.onhashchange=this.onLocationChange.bind(this):window.addEventListener("popstate",this.onLocationChange.bind(this),!1);var v=this.getQueryParams();Object.keys(v).length>0&&this.renderFromUrl(),this.viewState.initialised=!0}},ot=function(){this.createLayout(),this.unxSelectors=nt,this.renderDidYouMean.bind(this),this.options.onEvent.bind(this),this.options.products.onProductClick.bind(this),this.reRender=st.bind(this),this.bindEvents=ct.bind(this),this.bindEvents();var t=this.getQueryParams(),e=Object.keys(t).length,a=this.options.productView,n=a.defaultViewType,s=a.enabled;if(e>0){var i=t.viewType;i&&(this.viewState.productViewType=i,this.options.extraParams.viewType=i)}else this.options.extraParams.viewType=n;s&&this.renderProductViewTypeUI()},lt=function(){var t=this;this.searchResultsWrapper=this.createtSearchWrapper(),this.bannerWrapper=this.createBannerWrapper(),this.breadcrumbWrapper=this.createBreadcrumbWrapper(),this.pageSizeWrapper=this.createPageSizeWrapper(),this.productViewTypeWrapper=this.createProductViewTypeWrapper(),this.paginationWrappers=[],this.facetWrappers=[],this.sortWrappers=[],this.selectedFacetWrappers=[],this.spellCheckWrappers=[];var e=function(){var e=t.createSelectedFacetWrapper();return t.selectedFacetWrappers.push(e),e},a=this.options,n=a.facet,s=a.breadcrumb,i=a.banner,r=a.sort,c=a.products,o=a.pagesize,l=a.pagination,u=a.productView,d=a.selectedFacets,p=n.facetsEl,h=this.options.spellCheck.el;h&&((v=h).length||(v=[h]),v.forEach((function(e){var a;e.innerHTML="",e.appendChild((a=t.createSpellCheckWrapper(),t.spellCheckWrappers.push(a),a))})));if(p){var f=p;p.length||(f=[p]),f.forEach((function(e){var a;e.innerHTML="",e.appendChild((a=t.createFacetWrapper(),t.facetWrappers.push(a),a))}))}var g=r.el;if(g&&r.enabled){var v=g;g.length||(v=[g]),v.forEach((function(e){var a;e.innerHTML="",e.appendChild((a=t.createSortWrapper(),t.sortWrappers.push(a),a))}))}if(n.selectedFacetsEl)console.log("selectedFacetsEl option is depricated from v2.0.2, please use selectedFacets option to configure selected facets elements and template"),n.selectedFacetsEl.innerHTML="",n.selectedFacetsEl.appendChild(e());else{var b=d.el;if(d.enabled&&b){var y=b;b.length||(y=[b]),y.forEach((function(t){t.innerHTML="",t.appendChild(e())}))}}if(s.enabled&&s.el&&(s.el.innerHTML="",s.el.appendChild(this.breadcrumbWrapper)),i.el&&i.enabled&&(i.el.innerHTML="",i.template.bind(this),i.el.appendChild(this.bannerWrapper)),c.el&&(c.el.innerHTML="",c.el.appendChild(this.searchResultsWrapper)),o.el&&o.enabled&&(o.el.innerHTML="",o.el.appendChild(this.pageSizeWrapper)),u.el&&(u.el.innerHTML="",u.el.appendChild(this.productViewTypeWrapper)),l.enabled){var m=l.el;if(m){var S=m;m.length||(S=[m]),S.forEach((function(e){var a;e.innerHTML="",e.appendChild((a=t.createPaginationWrapper(),t.paginationWrappers.push(a),a))}))}}},ut=function(){var t=this.options.products,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},dt=function(){var t=this.options.facet,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},pt=function(){var t=this.options.banner,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},ht=function(){var t=this.options.breadcrumb,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},ft=function(){var t=this.options.pagesize,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},gt=function(){var t=this.options.sort,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},vt=function(){var t=this.options.selectedFacets,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},bt=function(){var t=this.options.spellCheck,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},yt=function(){var t=this.options.pagination,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},mt=function(){var t=this.options.productView,e=t.tagName,a=t.htmlAttributes,n=void 0===a?{}:a,s=t.events;return this.createElement(e,Object.assign({},n),s,this)},St=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,s=document.createElement(t),i=Object.keys(e);i.forEach((function(t){s.setAttribute(t,e[t])}));var r=Object.keys(a);return r.length>0&&r.forEach((function(t){s.addEventListener(t,a[t].bind(n))})),s},Ft=function(t){var e=this.options.products,a=Object.assign({},e,t);this.options.products=a},Ct=function(t){var e=this.options.facet,a=Object.assign({},e,t);this.options.facet=a},wt=function(t){var e=this.options;this.setConfig(e,t),this.initialize()},Nt=function(t){var e=this.options.onAction,a=t.target,n=a.dataset,s=this.cssList,i=s.openFacet,r=s.closeFacet,c=s.openBtn,o=s.closeBtn,l=s.viewMore,u=s.viewLess,d=this.options.facet,p=d.viewMoreText,h=d.textFacetWrapper;if(n){var f=n.facetAction,g=n.facetName,v=n.action,b=(n.id,this.viewState.facetElementMap),y=a.closest(".".concat(b[g]));if("facetOpen"===f&&(this.viewState.expandedFacets[g]=!0,a.classList.add(c),a.classList.remove(o),a.setAttribute("data-facet-action","facetClose"),y.classList.remove(r),y.classList.add(i)),"facetClose"===f&&(this.viewState.expandedFacets[g]=!1,a.classList.remove(c),a.classList.add(o),a.setAttribute("data-facet-action","facetOpen"),y.classList.remove(i),y.classList.add(r)),"viewMore"===v){a.setAttribute("data-action","viewLess"),a.innerHTML=p[1];var m=y.querySelector(".".concat(h));m.classList.remove(l),m.classList.add(u)}if("viewLess"===v){a.setAttribute("data-action","viewMore"),a.innerHTML=p[0];var S=y.querySelector(".".concat(h));S.classList.remove(u),S.classList.add(l)}}e(t,this)},Ut=function(t){var e=this.options.onAction,a=t.target.dataset;if(a){var n=a.facetAction,s=a.facetName;"searchFacets"===n&&this.setSearchFacetsText(s,t.target.value)}e(t,this)},Pt=function(){this.resetAll(),this.options.productType="CATEGORY",this.options.products.productType="CATEGORY",this.getCallbackActions(this,"categoryPage"),this.getResults()},At=function(){this.resetAll(),this.options.productType="BROWSE",this.options.products.productType="BROWSE",this.getCallbackActions(this,"categoryPage"),this.getResults()},Ot=function(){this.viewState.lastDidYouMean=null,this.viewState.searchFacetsText={},this.viewState.lastDidYouMean=null,this.viewState.expandedFacets={}},Et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unx_";return t+Math.random().toString(36).substr(2,9)},It=function(){},Rt=function(t){var e=t.prototype;e.renderBannerUI=f,e.setSearchWidget=Ft,e.setFacetWidget=Ct,e.updateConfig=wt,e.createLayout=lt,e.initialize=ot,e.extraActions=Nt,e.extraActionsChange=Ut,e.getCategoryPage=Pt,e.getBrowsePage=At,e.resetViewState=Ot,e.generateRid=Et,e.createElement=St,e.createFacetsLayout=It,function(t){t=Object.assign(t,{createtSearchWrapper:ut,createFacetWrapper:dt,createBannerWrapper:pt,createBreadcrumbWrapper:ht,createPageSizeWrapper:ft,createSortWrapper:gt,createSelectedFacetWrapper:vt,createSpellCheckWrapper:bt,createPaginationWrapper:yt,createProductViewTypeWrapper:mt})}(e),function(t){t=Object.assign(t,{setInputValue:z})}(e),function(t){t=Object.assign(t,{onPageViewTypeClick:L,renderProductViewTypeUI:k})}(e),function(t){t=Object.assign(t,{findChangedFacet:g,isSelectedRange:F,clearAllFacets:C,isExpandedFacet:w,setSearchFacetsText:N,getSearchFacetsText:U,reRenderTextFacet:P,renderTextFacet:b,renderRangeFacet:S,renderMultiLevelFacet:m,renderFacets:v,renderSelectedFacets:y,checkFacets:O,setRangeSlider:A})}(e),function(t){t=Object.assign(t,{renderSearch:E,onProductItemClick:I,renderNoResults:R,mapProductAttrs:T})}(e),function(t){t=Object.assign(t,{renderPagination:x,renderNewResults:_,paginationAction:B,onInfiniteScroll:X})}(e),function(t){t=Object.assign(t,{sortAction:V,renderSort:D})}(e),function(t){t=Object.assign(t,{renderDidYouMean:W,setSuggestion:H})}(e),function(t){t=Object.assign(t,{onBreadCrumbClick:Q,renderBreadCrumbs:Y})}(e),function(t){t=Object.assign(t,{renderSwatchBtns:q})}(e),function(t){t=Object.assign(t,{pageSizeUi:p,onClickPageSize:G,renderPageSize:K})}(e),function(t){t=Object.assign(t,{trackSearch:$,getCallbackActions:at,trackProductClick:J,trackImpression:Z,trackFacetClick:tt,trackCategoryPageLoad:et})}(e)};function Tt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var kt=(Tt(rt={beforeApiCall:"BEFORE_API_CALL",afterApiCall:"AFTER_API_CALL",beforeRender:"BEFORE_RENDER",beforeNoResultRender:"BEFORE_NO_RESULTS_RENDER",afterNoResultRender:"AFTER_NO_RESULTS_RENDER",afterRender:"AFTER_RENDER",deleteFacet:"DELETE_FACET",facetClick:"FACETS_CLICK",deleteFacetValue:"DELETE_FACET_VALUE"},"deleteFacet","DELETE_FACET"),Tt(rt,"clearSort","CLEAR_SORT"),Tt(rt,"changeSort","CHANGE_SORT"),Tt(rt,"pageNext","PAGE_NEXT"),Tt(rt,"pagePrev","PAGE_PREV"),Tt(rt,"changeInput","CHANGE_INPUT"),Tt(rt,"setCategoryFilter","SET_CATEGORY_FILTER"),Tt(rt,"deleteCategoryFilter","DELETE_CATEGORY_FILTER"),Tt(rt,"pageSizeChange","PAGESIZE_CHANGE"),rt),jt={clearCategoryFilter:"clearCategoryFilter",setCategoryFilter:"setCategoryFilter",changeSwatch:"changeSwatch",clearPriceRange:"clearPriceRange",applyRange:"applyRange",prev:"prev",next:"next",clearSort:"clearSort",changeSort:"changeSort",deleteFacet:"deleteFacet",deleteFacetValue:"deleteFacetValue",changeFacet:"changeFacet"},Lt={openFacet:"UNX-accordian-open",closeFacet:"UNX-accordian-close",openBtn:"UNX-facet-open",closeBtn:"UNX-facet-close",viewMore:"UNX-view-more",viewLess:"UNX-view-less"},xt={UNX_gridBtn:"UNX_gridBtn",UNX_listBtn:"UNX_listBtn",UNX_loadMore:"UNX_loadMore",UNX_variant:"UNX_variant",UNX_spellCheck:"UNX_spellCheck",UNX_pagesize:"UNX_pagesize",UNX_pageNumber:"UNX_pageNumber",UNX_unbxdSorter:"UNX_unbxdSorter",UNX_uFilter:"UNX_uFilter",UNX_rangeslider:"UNX_rangeslider",UNX_facetLevel:"UNX_facetLevel",UNX_searchFacets:"UNX_searchFacets",UNX_swatchClrBtn:"UNX_swatchClrBtn"},Xt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=j(!0,{},t,e);var a=e.facet,n=e.pagesize,s=e.swatches,i=e.products,r=e.productView;a&&(this.options.facetMultilevel=a.facetMultilevel?a.facetMultilevel:t.facet.facetMultilevel,this.options.facetMultiSelect="boolean"==typeof a.facetMultiSelect?a.facetMultiSelect:t.facet.facetMultiSelect,this.options.facetDepth=a.facetDepth?a.facetDepth:t.facet.facetDepth,this.options.applyMultipleFilters="boolean"==typeof a.applyMultipleFilters?a.applyMultipleFilters:t.facet.applyMultipleFilters),n?(this.options.pageSize=n.pageSize||t.pagesize.pageSize,this.state.pageSize=this.options.pageSize):(this.options.pageSize=t.pagesize.pageSize,this.state.pageSize=this.options.pageSize),i?(this.options.productAttributes=i.productAttributes?i.productAttributes:t.products.productAttributes,this.options.productType=i.productType?i.productType:t.products.productType):(this.options.productType=t.products.productType,this.options.productAttributes=t.products.productAttributes),s&&(this.options.showSwatches=s&&s.enabled?s.enabled:t.swatches.enabled),r&&(this.viewState.productViewType=r.defaultViewType?r.defaultViewType:t.productView.defaultViewType,this.options.productView.productViewType=this.viewState.productViewType)};function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function _t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bt(t,e){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bt(t,e)}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=Wt(t);if(e){var s=Wt(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Dt(this,a)}}function Dt(t,e){if(e&&("object"===Mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zt(t)}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wt(t){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wt(t)}var Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bt(t,e)}(r,t);var e,a,n,s=Vt(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=s.call(this,t)).viewState={productViewType:h.productView.defaultViewType,isInfiniteStarted:!1,lastAction:"",selectedRange:{},expandedFacets:{},searchFacetsText:{},noResultLoaded:!1,lastDidYouMean:null,loadedFromSuggestion:!1,setFromSuggest:!1,facetElementMap:{},initialised:!1},e.setConfig=Xt.bind(zt(e)),e.setConfig(h,t),e.events=kt,e.actions=jt,e.cssList=Lt,e.testIds=xt,e.updateConfig(),e.options.onEvent(zt(e),"initialised"),e}return e=r,(a=[{key:"callBack",value:function(t,e){this.getCallbackActions(t,e);var a=this.options,n=a.onEvent,s=a.loader,i=a.facet,r=a.productView,c=this.events,o=c.beforeApiCall,l=c.afterApiCall,u=(this.getQueryParams()||{}).viewType;"viewType"===this.viewState.lastAction&&(u=this.viewState.productViewType,this.options.extraParams.viewType=u,this.viewState.lastAction=""),"pagination"!=this.viewState.lastAction&&(this.viewState.isInfiniteStarted=!1),u||(u=this.viewState.productViewType||r.defaultViewType,this.viewState.productViewType=u,this.options.extraParams.viewType=u),this.viewState.productViewType!==u&&(this.viewState.productViewType=u,this.options.extraParams.viewType=u),e===o&&(n(this,o),s&&s.el&&(s.el.innerHTML=s.template(this))),e===l&&(n(this,l),this.state.products.length>0&&(this.viewState.noResultLoaded=!1),this.reRender()),"added_facet"!==e&&"deleted_facet"!==e||!i.applyMultipleFilters||(n(this,"added_facet"),this.renderFacets()),"FETCH_ERROR"===e&&s&&s.el&&(s.el.innerHTML="")}},{key:"delegate",value:function(t,e,a,n){return i(t,e,a,n)}}])&&_t(e.prototype,a),n&&_t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(s.a);Rt(Ht);e.default=Ht}}).default}));
